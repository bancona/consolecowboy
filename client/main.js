// Generated by CoffeeScript 1.9.3
(function() {
  var Graphics, ParticleTree, config, mainLoop, particleTree;

  Graphics = require('./graphics');

  config = require('./config');

  ParticleTree = require('./quadtree').ParticleTree;

  particleTree = new ParticleTree(config.WIDTH, {
    x: 0,
    y: 0,
    width: config.WIDTH,
    height: config.WIDTH
  });

  Graphics.gameContainer.mouseup = Graphics.gameContainer.touchend = function(args) {
    var localPoint;
    localPoint = Graphics.gameContainer.toLocal(args.data.global);
    return particleTree.addParticle(localPoint.x, localPoint.y);
  };

  Graphics.gameContainer.mousemove = function(args) {
    var localPoint, locationText;
    localPoint = Graphics.gameContainer.toLocal(args.data.global);
    if ((localPoint.x != null) && (localPoint.y != null) && localPoint.x >= 0 && localPoint.y >= 0) {
      locationText = "(" + (Math.floor(localPoint.x / 1)) + ", " + (Math.floor(localPoint.y / 1)) + ")";
    } else {
      locationText = '';
    }
    return document.getElementById('mouselocation').innerHTML = locationText;
  };

  (mainLoop = function() {
    particleTree.update(1);
    Graphics.render(particleTree);
    return requestAnimationFrame(mainLoop);
  })();

}).call(this);
