// Generated by CoffeeScript 1.9.3
(function() {
  module.exports = function(particleTree) {
    var snapshotElement;
    snapshotElement = $('#snapshot');
    snapshotElement.html('Take Snapshot');
    return function() {
      var particles;
      particles = JSON.stringify(particleTree.getParticles());
      console.log(particles.length);
      console.log(particles);
      snapshotElement.html('Taking Snapshot...');
      $.ajax('/takesnapshot', {
        type: 'POST',
        data: particles,
        contentType: 'application/json',
        success: function(data) {
          snapshotElement.html(data.message);
          setTimeout(function() {
            snapshotElement.html('Take Snapshot');
          }, 3000);
        },
        error: function() {
          snapshotElement.html('Snapshot Failed. Please try again');
          setTimeout(function() {
            snapshotElement.html('Take Snapshot');
          }, 3000);
        }
      });
    };
  };

}).call(this);
